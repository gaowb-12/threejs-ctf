{"version":3,"file":"js/app.57fe0715.js","mappings":"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","sources":["webpack://ctf-awd/./src/App.vue","webpack://ctf-awd/./src/App.vue?01fe","webpack://ctf-awd/./src/views/Ctf/index.vue","webpack://ctf-awd/./src/views/Ctf/utils/dom.ts","webpack://ctf-awd/./src/views/Ctf/common/LoadingManagers.ts","webpack://ctf-awd/./src/views/Ctf/consts.ts","webpack://ctf-awd/./src/views/Ctf/CTF/CTFAssets.ts","webpack://ctf-awd/./src/views/Ctf/common/Panel.ts","webpack://ctf-awd/./src/views/Ctf/common/Playground.ts","webpack://ctf-awd/./src/views/Ctf/common/Terrain.ts","webpack://ctf-awd/./src/views/Ctf/CTF/MapGrid.ts","webpack://ctf-awd/./src/views/Ctf/CTF/PlaygroundCTF.ts","webpack://ctf-awd/./src/views/Ctf/common/BaseObject.ts","webpack://ctf-awd/./src/views/Ctf/common/Bullet.ts","webpack://ctf-awd/./src/views/Ctf/AWD/Tank.ts","webpack://ctf-awd/./src/views/Ctf/common/Fire.ts","webpack://ctf-awd/./src/views/Ctf/common/Building.ts","webpack://ctf-awd/./src/views/Ctf/utils/random.ts","webpack://ctf-awd/./src/views/Ctf/utils/roundedRect.ts","webpack://ctf-awd/./src/views/Ctf/CTF/TargetCTFPanel.ts","webpack://ctf-awd/./src/views/Ctf/CTF/TargetCTF.ts","webpack://ctf-awd/./src/views/Ctf/utils/broadcast.ts","webpack://ctf-awd/./src/views/Ctf/CTF/TeamCTFPanel.ts","webpack://ctf-awd/./src/views/Ctf/utils/loop.ts","webpack://ctf-awd/./src/views/Ctf/CTF/TeamCTF.ts","webpack://ctf-awd/./node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js","webpack://ctf-awd/./src/views/Ctf/index.vue?a3bd","webpack://ctf-awd/./src/views/Ctf/index.vue?2f32","webpack://ctf-awd/./src/router/index.ts","webpack://ctf-awd/./src/store/index.ts","webpack://ctf-awd/./src/main.ts","webpack://ctf-awd/webpack/bootstrap","webpack://ctf-awd/webpack/runtime/chunk loaded","webpack://ctf-awd/webpack/runtime/compat get default export","webpack://ctf-awd/webpack/runtime/define property getters","webpack://ctf-awd/webpack/runtime/global","webpack://ctf-awd/webpack/runtime/hasOwnProperty shorthand","webpack://ctf-awd/webpack/runtime/jsonp chunk loading","webpack://ctf-awd/webpack/startup"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=0b91585b&\"\nvar script = {}\nimport style0 from \"./App.vue?vue&type=style&index=0&id=0b91585b&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"playground\",attrs:{\"id\":\"ctf\"}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export function h (tagName = 'div'): HTMLElement {\n  return document.createElement(tagName)\n}\n\nexport function qs (selector: string): Element|null {\n  return document.querySelector(selector)\n}","import { LoadingManager } from 'three'\nimport { h } from '../utils/dom'\n\nconst loadUI = h('div')\nconst loadText = h('div')\nloadUI.appendChild(loadText)\nloadUI.className = 'load-ui'\nloadUI.id = 'load-ui'\n\nconst AssetsLoadingManager = new LoadingManager()\n\nAssetsLoadingManager.onStart = () => {\n  document.body.appendChild(loadUI)\n  loadText.innerHTML = `<div>LOADING... 0%</div>`\n}\nAssetsLoadingManager.onProgress = (url, loaded, total) => {\n  loadUI.innerHTML = `<div>LOADING... ${(loaded / total * 100).toFixed(2)}%</div>`\n}\nAssetsLoadingManager.onLoad = () => {\n  console.log('assets loaded.')\n  loadText.innerHTML = '<div>LOADING... 100%</div>'\n  loadUI.style.opacity = '0'\n  setTimeout(() => document.body.removeChild(loadUI), 5000)\n}\nAssetsLoadingManager.onError = (url) => {\n  console.log('load assets error.')\n  loadText.innerHTML = `<div>Load assets error: ${url}</div>`\n}\n\nexport { AssetsLoadingManager }\n","export const assetsDir = '/threejs-ctf/assets'\nexport const modelsDir = `${assetsDir}/models`\nexport const imgsDir = `${assetsDir}/imgs`","import { BufferGeometry, CubeTexture, CubeTextureLoader, Geometry, ImageLoader, Matrix4, Mesh } from 'three'\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader'\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\nimport { AssetsLoadingManager } from '../common/LoadingManagers'\nimport { imgsDir, modelsDir } from '../consts'\n\nexport interface CTFAssets {\n  buildings: Array<BufferGeometry | Geometry>,\n  aerobat?: Mesh,\n  heightimg?: HTMLImageElement,\n  cubeTexture?: CubeTexture\n}\n\nexport class CTFAssetsLoader {\n  static async load(): Promise<CTFAssets> {\n    return new Promise((resolve) => {\n      const assets: CTFAssets = {\n        buildings: []\n      }\n    \n      let count = 8\n    \n      function callback() {\n        count -= 1\n        if (!count) resolve(assets)\n      }\n\n      new ImageLoader(AssetsLoadingManager).load(`${imgsDir}/heigh2.jpg`, img => {\n        assets.heightimg = img\n        callback()\n      })\n      const arr = ['5', '7', '5', '5', '8', '6']\n      new CubeTextureLoader(AssetsLoadingManager).load(arr.map(n => `${imgsDir}/${n}.png`), cubeTexture => {\n        // 立方体贴图\n        assets.cubeTexture = cubeTexture\n        callback()\n      })\n      new OBJLoader(AssetsLoadingManager).load(`${modelsDir}/2.obj`, obj => {\n        const mesh = obj.children[0] as Mesh\n        assets.buildings.push(mesh.geometry)\n        callback()\n      })\n      new OBJLoader(AssetsLoadingManager).load(`${modelsDir}/3.obj`, obj => {\n        const mesh = obj.children[0] as Mesh\n        assets.buildings.push(mesh.geometry)\n        callback()\n      })\n      new OBJLoader(AssetsLoadingManager).load(`${modelsDir}/4.obj`, obj => {\n        const mesh = obj.children[0] as Mesh\n        assets.buildings.push(mesh.geometry)\n        callback()\n      })\n      new OBJLoader(AssetsLoadingManager).load(`${modelsDir}/5.obj`, obj => {\n        const mesh = obj.children[0] as Mesh\n        assets.buildings.push(mesh.geometry)\n        callback()\n      })\n      new OBJLoader(AssetsLoadingManager).load(`${modelsDir}/6.obj`, obj => {\n        const mesh = obj.children[0] as Mesh\n        const geometry = mesh.geometry\n        // 这个模型不是居中的，在这里调整一下\n        geometry.applyMatrix4(new Matrix4().makeTranslation(-750, 0, -60))\n        assets.buildings.push(geometry)\n        callback()\n      })\n      new GLTFLoader(AssetsLoadingManager).load(`${modelsDir}/aerobat.gltf`, gltf => {\n        const mesh = gltf.scene.children[0].children[0] as Mesh\n        assets.aerobat = mesh\n        callback()\n      })\n    })\n  }\n}","import { PerspectiveCamera, WebGLRenderer } from 'three'\nimport { h } from '../utils/dom'\nimport { BaseObject } from './BaseObject'\n\nexport interface PanelOffset {\n  x?: number\n  y?: number\n  z?: number\n}\nexport class Panel {\n  static instances: Panel[] = []\n  static renderer: WebGLRenderer\n  static camera: PerspectiveCamera\n\n  public obj: BaseObject\n  public el: HTMLDivElement |null\n  private _visible = false\n  public offset: PanelOffset\n  public content: HTMLDivElement\n  public distance: number\n\n  constructor(obj: BaseObject, offset?: PanelOffset, distance = 1200) {\n    // 对应的队伍或者靶标\n    this.obj = obj\n    // 队伍或者靶标提示标签（队伍或者靶标上方的HTML标签）\n    this.el = h('div') as HTMLDivElement\n    this.el.className = 'panel'\n    this.content = h('div') as HTMLDivElement\n    this.content.className = 'panel-content'\n    this.content.innerHTML = this.obj.name || '_'\n    this.distance = distance\n    this.el.appendChild(this.content)\n    // 创建最外层的HTML标签，用于包裹所有队伍或者靶标的提示标签\n    let panelsContainer = document.querySelector('.panels')\n    if (!panelsContainer) {\n      panelsContainer = h('div')\n      panelsContainer.className = 'panels'\n      document.body.appendChild(panelsContainer)\n    }\n    panelsContainer.appendChild(this.el)\n    // 保存队伍和靶标实例，用于更新对应实例的动画\n    Panel.instances.push(this)\n\n    this.offset = offset || { x: 0, y: 0, z: 0 }\n  }\n\n  // 更新场景内的队伍和靶标实例动画\n  static update() {\n    Panel.instances.forEach(p => p.update())\n  }\n\n  // 队伍和靶标标签的控制\n  public update() {\n    const p = this.obj.position.clone()\n    // 获取世界坐标\n    this.obj.getWorldPosition(p)\n    // 距离相机的距离（Panel.camera保存了特写相机跟第三人称相机）\n    const distance = Panel.camera.position.distanceTo(p)\n\n    p.y += ((this.offset as any).y * this.obj.scale.y)\n    // 将此向量(坐标)从世界空间投影到相机的标准化设备坐标 (NDC) 空间。\n    const v = p.project(Panel.camera)\n\n    // webgl坐标转换为屏幕坐标\n    v.x = (v.x + 1) / 2 * window.innerWidth\n    v.y = -(v.y - 1) / 2 * window.innerHeight\n    \n    let style = `transform: translate3d(${v.x}px, ${v.y}px, 0);`\n    // 距离相机远的需要隐藏\n    if (distance > this.distance || distance <= 0) style += `visibility: hidden;`\n    else style += `visibility: visible;`;\n\n    (this.el as HTMLDivElement).setAttribute('style', style)\n  }\n\n  public destroy() {\n    document.body.removeChild(this.el as HTMLDivElement);\n    this.el = null\n  }\n}\n\n","import { AmbientLight, FogExp2, PerspectiveCamera, Scene, Vector2, WebGLRenderer } from 'three'\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\nimport { update as TweenUpdate } from '@tweenjs/tween.js'\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\n// import { Stats } from '../utils/stats'\nimport Stats from 'three/examples/jsm/libs/stats.module'\nimport { Panel } from './Panel'\n\nexport class Playground extends Scene{\n  el: HTMLElement\n  // 环境光\n  ambientLight = new AmbientLight(0xffffff, 0.3)\n  // 摄像机\n  camera = new PerspectiveCamera(72, 1, 0.1, 5000)\n  // 渲染器\n  renderer = new WebGLRenderer({ antialias: true })\n  // 场景渲染\n  scenePass = new RenderPass(this, this.camera)\n  // 泛光效果\n  // bloomPass = new UnrealBloomPass(new Vector2(window.innerWidth, window.innerHeight), 1, 1.2, 0.23)\n  // faxx 抗锯齿\n  // fxaaPass = new ShaderPass(FXAAShader)\n  // 合成器\n  composer = new EffectComposer(this.renderer)\n  // 交互控制器\n  controls: OrbitControls\n  // 是否已暂停\n  isPaused = false\n  // 帧率\n  stats = new (Stats as any)()\n\n  // 鼠标位置\n  static mouse = new Vector2()\n  // static raycaster = new Raycaster()\n\n  constructor(el: HTMLElement) {\n    super()\n    this.el = el\n    this.el.classList.add('playground-canvas')\n    this.controls = new OrbitControls(this.camera, el)\n    this.init()\n  }\n\n  init () {\n    const { renderer, camera, el, controls, composer, stats } = this\n    // 添加渲染器（画布）\n    el.appendChild(renderer.domElement)\n\n    this.renderer.shadowMap.enabled = true\n\n    camera.position.z = 1000\n    camera.position.y = -100\n    camera.lookAt(0, 0, 0)\n    camera.updateProjectionMatrix()\n    camera.updateMatrixWorld(true)\n    // 雾效果\n    this.fog = new FogExp2(0x0f1022, 0.0008)\n    // 环境光\n    this.add(this.ambientLight)\n\n    composer.passes = [this.scenePass]\n\n    controls.minDistance = 500\n    controls.maxDistance = 1600\n    controls.enabled = true\n    controls.autoRotate = true\n    controls.autoRotateSpeed = 1\n    controls.enableDamping = true\n    controls.dampingFactor = 0.1\n    controls.maxPolarAngle = Math.PI * 0.57\n\n    // 帧率\n    stats.domElement.style.position = 'absolute'\n    stats.domElement.style.top = 0\n    this.el.appendChild(stats.domElement)\n    \n    window.addEventListener('resize', this.resize.bind(this))\n    // document.addEventListener('visibilitychange', e => this.isPaused = document.hidden)\n    // window.addEventListener('mousemove', this.onMousemove.bind(this))\n  }\n\n  animate() {\n    if (!this.isPaused) requestAnimationFrame(this.animate.bind(this))\n    this.stats.update()\n    this.controls.update()\n    // 靶标动画\n    TweenUpdate()\n    // 队伍和靶标提示标签动画\n    Panel.update()\n    // 通过后期处理通道合成\n    this.composer.render()\n  }\n\n  resize() {\n    const { clientWidth, clientHeight } = this.el\n    this.camera.aspect = clientWidth / clientHeight\n    this.renderer.setSize(clientWidth, clientHeight)\n    this.renderer.setPixelRatio(window.devicePixelRatio)\n    // this.bloomPass.resolution.set(clientWidth / 2, clientHeight / 2)\n    // this.fxaaPass.material.uniforms[ 'resolution' ].value.x = 1 / (clientWidth * window.devicePixelRatio);\n    // this.fxaaPass.material.uniforms[ 'resolution' ].value.y = 1 / (clientHeight * window.devicePixelRatio);\n    this.composer.setSize(clientWidth, clientHeight)\n    this.camera.updateProjectionMatrix()\n  }\n\n  // onMousemove(event: MouseEvent) {\n  //   const { clientWidth, clientHeight } = this.el\n  //   const { clientX, clientY } = event\n  //   const { mouse, raycaster } = Playground\n  //   mouse.x = clientX / clientWidth * 2 - 1\n  //   mouse.y = clientY / clientHeight * 2 - 1\n  //   raycaster.setFromCamera(mouse, this.camera)\n  //   const object = raycaster.intersectObjects(this.children)\n  //   console.log(object[0]?.object.uuid)\n  // }\n}","import { Matrix4, PlaneBufferGeometry } from 'three'\n\n// 平面缓冲几何体\nexport class Terrain extends PlaneBufferGeometry {\n  constructor (heightImg: HTMLImageElement) {\n    const { width, height } = heightImg\n    // width — 平面沿着X轴的宽度。默认值是1。\n    // height — 平面沿着Y轴的高度。默认值是1。\n    // widthSegments — （可选）平面的宽度分段数，默认值是1。\n    // heightSegments — （可选）平面的高度分段数，默认值是1。\n    // 将平面分段\n    super(width, height, width - 1, height - 1)\n    const rotation = new Matrix4().makeRotationX(-Math.PI / 2)\n    this.applyMatrix4(rotation)\n\n    // 将地面图片绘制到canvas上\n    const canvas = document.createElement('canvas')\n    canvas.width = width\n    canvas.height = height\n    const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n    ctx.drawImage(heightImg, 0, 0)\n    // 像素图片信息\n    const pixels = ctx.getImageData(0, 0, width, height).data\n\n    // 对几何体顶点进行处理\n    // 获取顶点数据构成的类型化数据\n    const array = this.attributes.position.array as Array<number>\n    const len = width * height\n    for (let i = 0; i < len; i++) {\n      // 将图片像素的r通道的值进行归一化之后，重新赋值给顶点数据的Y坐标，目的是将顶点数据更新，让地面处于随机凹凸状态\n      array[i * 3 + 1] = pixels[i * 4] / 256\n    }\n  }\n}","export class MapGrid extends Array<{ x: number, y: number, value: number, used: boolean }> {\n  size: number\n  constructor(size = 20) {\n    super()\n    this.size = size\n\n    // 画一个径向渐变，根据亮度来排序坐标\n    const canvas = document.createElement('canvas')\n    canvas.width = size\n    canvas.height = size\n    const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n    const radius = size / 2\n    // 绘制径向渐变\n    const grd = ctx.createRadialGradient(radius, radius, 0, radius, radius, radius)\n    grd.addColorStop(0, '#fff')\n    grd.addColorStop(0.2, '#888')\n    grd.addColorStop(0.5, '#444')\n    grd.addColorStop(1, '#222')\n    ctx.fillStyle = grd\n    ctx.fillRect(0, 0, size, size)\n    // 获取径向渐变的像素数据\n    const pixels = ctx.getImageData(0, 0, size, size).data\n\n    const array = [] //保存r通道的数值\n    const len = pixels.length\n    for (let i = 0; i < len; i += 4) {\n      array.push(pixels[i] as never)\n    }\n    // r通道的最大值（最大255，在画布中心）\n    const max = Math.max(...array)\n    for (let x = 0; x < size; x++) {//第几行\n      for (let y = 0; y < size; y++) {//第几列\n        // 第几个像素点的r通道值\n        const num = array[x * size + y]\n        // 当前r通道值与最大r通道值的所占百分比\n        const value = Math.round(num / max * 100)\n        const item = {\n          // 描述位置坐标(-10 到 10)\n          x: x - size / 2,\n          y: y - size / 2,\n          value,\n          used: false\n        }\n        // 中心坐标\n        const center = size / 2 - 1 ; // 9\n        // 将每个像素点处理之后的数据保存\n        if (value === 100 && x === center && y === center || value < 100) this.push(item)\n      }\n    }\n    // 升序排列\n    this.sort((a, b) => b.value - a.value)\n  }\n}","import { AdditiveBlending, CubeTexture, BoxBufferGeometry, DirectionalLight, DoubleSide, EdgesGeometry, Group, LineBasicMaterial, LineSegments, Matrix4, Mesh, MeshBasicMaterial, MeshLambertMaterial, PerspectiveCamera, PlaneBufferGeometry, PointLight, TextureLoader, Vector3 } from 'three'\nimport { CTFAssets } from './CTFAssets'\nimport { Playground } from '../common/Playground'\nimport { Terrain } from '../common/Terrain'\nimport { TeamCTF } from './TeamCTF'\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\nimport { Panel } from '../common/Panel'\nimport { MapGrid } from './MapGrid'\nimport { Tween, Easing } from '@tweenjs/tween.js'\nimport { TargetCTF } from './TargetCTF'\nimport { imgsDir } from '../consts'\n\n// ctf整体场景类，继承自Scene基类\nexport class PlaygroundCTF extends Playground {\n  // 底部雷达扫描\n  scan: Mesh\n  // 场景所需资源\n  assets: CTFAssets\n  // 队伍\n  teams: TeamCTF[] = []\n  teamGroup: Group = new Group()\n  // 靶标\n  targets: TargetCTF[] = []\n  // 特写相机\n  focusCamera = new PerspectiveCamera(55, 1, 0.1, 5000)\n  // 特写渲染合成\n  focusScenePass = new RenderPass(this, this.focusCamera)\n  // 当前是否为特写状态\n  isFocus = false\n  // 当前特写的队伍\n  focusTeam!: TeamCTF | null\n  // 地图网格\n  mapGrid = new MapGrid()\n  gridSize = 240\n\n  constructor(el: HTMLElement, assets: CTFAssets) {\n    super(el)\n    if (!assets) throw new Error('缺少场景资源.')\n    this.assets = assets\n\n    Panel.camera = this.camera\n\n    this.resize()\n\n    // 灯光\n    const dirLight = new DirectionalLight(0xffffff, 0.7)\n    dirLight.position.set(1500, 800, 3000)\n    this.add(dirLight)\n\n    const plight1 = new PointLight(0x0090ff, 2, 1000)\n    const plight2 = new PointLight(0x00d2ff, 1, 1000)\n    plight1.position.set(550, 500, 0)\n    plight2.position.set(-550, 500, 0)\n    this.add(plight1, plight2)\n    // this.add(new PointLightHelper(plight1, 30), new PointLightHelper(plight2, 30))\n\n    // 天空盒\n    this.background = assets.cubeTexture as CubeTexture;\n\n    // 地形\n    // 几何体边缘材质（线条材质）\n    const material = new LineBasicMaterial({ color: 0x006bff, blending: AdditiveBlending })\n    // 地形的几何体对象（通过PlaneBufferGeometry对象将几何体分成多个片段）\n    const terrainGeometry = new Terrain(assets.heightimg as HTMLImageElement)\n    // const simplifyGeometry = new SimplifyModifier().modify(terrainGeometry, 1000)\n    // 通过边缘几何体，把几何体对象的边缘展示出来\n    const edges = new EdgesGeometry(terrainGeometry, 1)\n    const terrain = new LineSegments(edges, material)\n    terrain.position.set(0, -300, -300)\n    terrain.scale.set(60, 700, 60)\n    this.add(terrain)\n    \n    // 雷达扫描\n    const g = new PlaneBufferGeometry(1800, 1800)\n    g.applyMatrix4(new Matrix4().makeRotationX(-Math.PI / 2))\n    const m = new MeshBasicMaterial({\n      transparent: true,\n      blending: AdditiveBlending,\n      // 扫描进度贴图\n      map: new TextureLoader().load(`${imgsDir}/scan.png`),\n      depthWrite: false\n    })\n    this.scan = new Mesh(g, m)\n    this.scan.position.y = -320\n    this.add(this.scan)\n\n    const pg1 = new PlaneBufferGeometry(2000, 2000)\n    pg1.applyMatrix4(new Matrix4().makeRotationX(-Math.PI / 2))\n    const m1 = new MeshBasicMaterial({\n      transparent: true,\n      opacity: 0.6,\n      blending: AdditiveBlending,\n      // 扫描背景贴图\n      map: new TextureLoader().load(`${imgsDir}/btm-bg.png`),\n      depthWrite: false\n    })\n    const mesh1 = new Mesh(pg1, m1)\n    mesh1.position.y = -321\n    this.add(mesh1)\n\n    // 地板\n    const pg = new BoxBufferGeometry(5000, 50, 5000)\n    const pm = new MeshLambertMaterial({ color: 0x2a3d5c, side: DoubleSide })\n    const mesh = new Mesh(pg, pm)\n    mesh.position.y = -350\n    this.add(mesh)\n\n    // 添加队伍组\n    this.add(this.teamGroup)\n    \n    // 执行雷达扫描动画\n    this.animate()\n  }\n\n  // 开始设置队伍\n  setTeams(teams: TeamCTF[] = []) {\n    this.clearTeams()\n    teams.forEach(team => this.addTeam(team))\n  }\n\n  // 添加队伍\n  addTeam(team: TeamCTF) {\n    const index = this.teams.length + 1\n    const grid = this.mapGrid[index]\n    const { x, y } = grid\n\n    const rotationY = -Math.atan2(y, x)\n    team.rotation.y = team.initialRotationY = rotationY\n    // 设置每个队伍的位置\n    team.position.set(x * this.gridSize + this.gridSize / 2, 300, y * this.gridSize + this.gridSize / 2)\n    this.teamGroup.add(team)\n    this.teams.push(team)\n  }\n  // 清空全部队伍\n  clearTeams() {\n    this.teams.forEach(t => {\n      this.teamGroup.remove(t)\n      t.destroy()\n    })\n    this.teams = []\n  }\n\n  // 开始设置靶标\n  setTargets(targets: TargetCTF[] = []) {\n    this.clearTargets()\n    // 添加靶标\n    targets.sort((a, b) => b.score - a.score).forEach(item => this.addTarget(item))\n  }\n\n  // 添加靶标模型实例\n  addTarget(target: TargetCTF) {\n    // 已经存在的靶标数量\n    const index = this.targets.length\n    \n    // 每个靶标对应一个网格位置\n    const grid = this.mapGrid[index];\n    const { x, y, value } = grid; // x，y的取值范围这里是-10到10\n    if (index === 0) {\n      // 第一个靶标\n      target.scale.set(2, 2, 2);//第一个靶标设置缩放\n      target.position.set(0, -800, 0)\n    } else {\n      // 其余靶标\n      // y轴位置固定（高度固定），x、z坐标定位靶标的位置（这里将网格坐标放大了gridSize倍）\n      target.position.set(x * this.gridSize + this.gridSize / 2, -800, y * this.gridSize + this.gridSize / 2)\n      target.scale.y = value / 100;//其余靶标根据百分比设置缩放\n    }\n    this.add(target)\n    const p = target.position\n    // 靶标位置添加动画\n    new Tween(p)\n      .delay((index + 1) * 50)\n      .to({ x: p.x, y: -300, z: p.z }, 1000)\n      .easing(Easing.Back.Out)\n      .start()\n    // const lineMtl = target.line.material as Material\n    // lineMtl.opacity = 0.5\n    // new Tween(lineMtl)\n    //   .delay((index + 1) * 100 + 3000)\n    //   .to({ opacity: 0.3 }, 2500)\n    //   .start()\n    this.targets.push(target)\n  }\n\n  // 清除所有靶标\n  clearTargets() {\n    this.targets.forEach(t => {\n      this.remove(t)\n      t.destroy()\n    })\n    this.targets = []\n  }\n\n  // 进行特写\n  focus(team: TeamCTF) {\n    // 是否有正在特写的队伍或者不存在队伍\n    if (this.isFocus || !team || this.focusTeam) return\n    // 特写当前队伍\n    this.focusTeam = team\n    Panel.camera = this.focusCamera\n    // 切换为特写相机\n    this.composer.passes = [this.focusScenePass]\n    this.isFocus = true\n    this.controls.enabled = false\n    // 特写三秒，然后切换为第三人称相机\n    setTimeout(this.unFocus.bind(this), 3000)\n  }\n\n  // 不进行特写\n  unFocus() {\n    Panel.camera = this.camera\n    // 切换为第三人称相机\n    this.composer.passes = [this.scenePass]\n    this.focusTeam = null\n    this.controls.enabled = true\n    // 延迟 3 秒，避免频繁特写\n    setTimeout(() => {\n      this.isFocus = false\n    }, 3000)\n  }\n\n  // 更新特写相机\n  updateFocusCamera() {\n    const { focusTeam, focusCamera } = this\n    // 如果特写队伍不存在或者特写队伍没有攻击目标，就不更新\n    if (!focusTeam || !focusTeam.target) return\n    const p = new Vector3()\n    // 获取特写相机的世界坐标保存到p中\n    focusTeam.cpos.getWorldPosition(p)\n    // 设置特写相机到需要特写的坐标p上\n    focusCamera.position.set(p.x, p.y + 100, p.z)\n    // 朝向特写队伍\n    focusCamera.lookAt(focusTeam.target.position)\n  }\n\n  animate() {\n    super.animate()\n    // 扫描进度开始绕y轴旋转\n    this.scan.rotation.y += 0.04\n    // 队伍绕y轴旋转\n    this.teamGroup.rotation.y -= 0.006\n    // 是否存在特写队伍，更新特写相机\n    if (this.focusTeam) this.updateFocusCamera()\n  }\n\n  resize() {\n    super.resize()\n    if (this.focusCamera) {\n      this.focusCamera.aspect = this.camera.aspect\n      this.focusCamera.updateProjectionMatrix()\n    }\n  }\n}","import { Object3D } from 'three'\nimport { Playground } from './Playground'\n\nexport class BaseObject extends Object3D{\n  // 取值属性，获取祖先类型为Scene的对象\n  get playground(): Playground {\n    let p = this.parent\n    while (p && p.type !== 'Scene') p = p.parent\n    return p as Playground\n  }\n}","import { Tween } from '@tweenjs/tween.js'\nimport { BoxBufferGeometry, Mesh, MeshBasicMaterial, Object3D, QuadraticBezierCurve3, Vector3 } from 'three'\nimport { Playground } from './Playground'\n\nconst g = new BoxBufferGeometry(3, 3, 30)\nconst m = new MeshBasicMaterial({ color: 0xffff00 })\n\n// 子弹网格对象\nexport class Bullet extends Mesh {\n  static pool: Bullet[] = []\n\n  public used: boolean\n\n  constructor() {\n    super(g, m)\n    this.used = false\n    Bullet.pool.push(this)\n  }\n\n  static shoot(playground: Playground, from: Object3D, to: Object3D, isCurve = false) {\n    // 获取没有被使用的子弹网格对象\n    const bullet = Bullet.pool.find(b => !b.used) || new Bullet()\n    bullet.used = true\n    // 获取攻击队伍，与被攻击靶标的坐标\n    const sp = from.position.clone()\n    const ep = to.position.clone()\n    // 设置两点的世界坐标位置\n    // from.parent是队伍组，to.parent是playgroundCTF场景实例\n    sp.applyMatrix4((from.parent as Object3D).matrixWorld)\n    ep.applyMatrix4((to.parent as Object3D).matrixWorld)\n    // 子弹的位置\n    bullet.position.set(sp.x, sp.y, sp.z)\n    playground.add(bullet)\n    \n    if (isCurve) {\n      // 是曲线\n      // 创建贝塞尔曲线\n      const curve = new QuadraticBezierCurve3(\n        new Vector3(sp.x, sp.y, sp.z),\n        new Vector3(sp.x + (ep.x - sp.x) / 2, 500, sp.z + (ep.z - sp.z) / 2),\n        new Vector3(ep.x, ep.y, ep.z),\n      )\n      const obj = { t: 0 }\n      new Tween(obj)\n        .to({ t: 1 })\n        .onUpdate((obj) => {\n          // 获取曲线上的位置\n          const p = curve.getPoint(obj.t)\n          // 某位置的单位向量切线\n          const t = curve.getTangent(obj.t)\n          // 设置子弹位置的轨迹路线\n          bullet.position.set(p.x, p.y, p.z)\n          // 设置子弹的旋转\n          bullet.rotation.set(t.x, Math.PI / 2 + t.y, 0)\n        })\n        .onComplete(() => {\n          playground.remove(bullet)\n          bullet.used = false\n        })\n        .start()\n    } else {\n      // 非曲线\n      // 子弹直接朝向靶标\n      bullet.lookAt(to.position)\n      // 将子弹的位置从队伍变化到靶标\n      new Tween(bullet.position)\n        .to(ep, 1000)\n        .onComplete(() => {\n          playground.remove(bullet)\n          bullet.used = false\n        })\n        .start()\n    }\n  }\n}","import { DoubleSide, Matrix4, Mesh, MeshStandardMaterial, PlaneBufferGeometry, TextureLoader } from 'three'\nimport { BaseObject } from '../common/BaseObject'\nimport { Bullet } from '../common/Bullet'\nimport { imgsDir } from '../consts'\nimport { loop } from '../utils/loop'\nimport { TargetAWD } from './TargetAWD'\n\nconst mtl = new MeshStandardMaterial({\n  color: 0x666666,\n  roughness: 0.4\n})\n\nexport class Tank extends BaseObject{\n  constructor(mesh: Mesh) {\n    super()\n    const ms = new Mesh(mesh.geometry, mtl)\n    ms.scale.set(0.5, 0.5, 0.5)\n\n    const g = new PlaneBufferGeometry(220, 170)\n    g.applyMatrix4(new Matrix4().makeRotationX(-Math.PI / 2))\n    const m = new MeshStandardMaterial({\n      // color: 0x666666,\n      side: DoubleSide,\n      depthWrite: false,\n      transparent: true,\n      map: new TextureLoader().load(`${imgsDir}/tank-shadow.png`)\n    })\n    const shadow = new Mesh(g, m)\n    shadow.position.y = 0.5\n    this.add(ms, shadow)\n  }\n\n  toAttack(target: TargetAWD) {\n    const playground = this.playground\n    loop({\n      interval: 150,\n      times: 10,\n      callback: () => {\n        Bullet.shoot(playground, this, target, true)\n      }\n    })\n  }\n}","import { Easing, Tween } from '@tweenjs/tween.js'\nimport { AdditiveBlending, DoubleSide, Mesh, MeshBasicMaterial, PlaneBufferGeometry, Texture, TextureLoader } from 'three'\nimport { imgsDir } from '../consts'\nimport { BaseObject } from './BaseObject'\n\nexport class Fire extends BaseObject {\n  static pool: Fire[] = []\n  static size = 100\n  // 通过纹理贴图实现爆炸效果（帧图片）\n  static texture: Texture = new TextureLoader().load(`${imgsDir}/fire1.png`)\n\n  texture: Texture\n  used = false\n  // 从第一帧开始动画\n  tween = new Tween({ index: 0 })\n\n  constructor() {\n    super()\n    const g = new PlaneBufferGeometry(Fire.size, Fire.size)\n    const m = new MeshBasicMaterial()\n    // 设置纹理\n    const texture = Fire.texture.clone()\n    texture.needsUpdate = true // 不加这个 clone 无效\n    // 在每个方向 U 和 V，纹理在表面上重复多少次（这里的四分之一感觉是属于截取了）\n    texture.repeat.set(1 / 4, 1 / 4)\n    // 在 U 和 V 的每个方向上，纹理的单个重复从开头偏移多少（这里感觉是从雪碧图的第几个小图开始）\n    texture.offset.x = 0 / 4\n    texture.offset.y = 3 / 4\n    // 设置材质\n    // 定义将要渲染哪一面 - 正面，背面或两者。（这里表示两面都渲染）\n    m.side = DoubleSide\n    // 定义此材质是否透明。这对渲染有影响，因为透明对象需要特殊处理，并在非透明对象之后渲染。\n    m.transparent = true\n    // 渲染此材质是否对深度缓冲区有任何影响。默认为true。\n    m.depthWrite = false\n    // 设置颜色纹理贴图\n    m.map = texture\n    // 在使用此材质显示对象时要使用何种混合（主要控制纹理融合的叠加方式）。\n    m.blending = AdditiveBlending;//加法融合模式（应该是再着色器中的色值直接相加）\n\n    // 生成网格对象\n    const mesh = new Mesh(g, m)\n    // 多生成两个网格对象，为了叠加爆炸效果，看起来更逼真\n    const mesh1 = new Mesh(g, m)\n    const mesh2 = new Mesh(g, m)\n    mesh1.rotation.y = -Math.PI / 2\n    mesh2.rotation.x = Math.PI / 2\n    mesh2.position.y = -10\n    this.add(mesh)\n    this.texture = texture\n\n    // 从0变化到15实现爆炸效果\n    this.tween.to({ index: 15 }, 2000)\n      .easing(Easing.Linear.None)\n      .onStart(() => {\n        this.playground.add(this)\n      })\n      .onUpdate(({ index }) => {\n        // 改变纹理坐标的偏移，用于获取雪碧图上不同的图片\n        const x = ~~(index % 4)\n        const y = 3 - ~~(index / 4)\n        texture.offset.x = x / 4\n        texture.offset.y = y / 4\n      })\n      .onComplete(() => {\n        // 从场景中移除待用\n        this.playground.remove(this)\n        this.used = false\n      })\n\n      // 缓存待用\n    Fire.pool.push(this)\n  }\n\n  start() {\n    // 开始爆炸特效\n    this.tween.start()\n  }\n\n  // 获取一次爆炸效果\n  static getOne() {\n    const fire = Fire.pool.find(f => !f.used) || new Fire()\n    fire.used = true\n    return fire\n  }\n}","import { AdditiveBlending, Box3, BoxBufferGeometry, BufferGeometry, EdgesGeometry, Geometry, LineBasicMaterial, LineSegments, Matrix4, Mesh, MeshLambertMaterial, Vector3 } from 'three'\nimport { BaseObject } from './BaseObject'\nimport { Fire } from './Fire'\n\nconst materials = {\n  normal: {\n    mesh: new MeshLambertMaterial({ color: 0x78abff, transparent: true, opacity: 0.55 }),\n    line: new LineBasicMaterial({ color: 0x006bff, blending: AdditiveBlending, transparent: true, visible: false }),\n    box: new MeshLambertMaterial({ color: 0x2a3d5c, transparent: true, opacity: 0.6, blending: AdditiveBlending, depthWrite: false }),\n  },\n  red: {\n    mesh: new MeshLambertMaterial({ color: 0xa01717 }),\n    line: new LineBasicMaterial({ color: 0xff2000, blending: AdditiveBlending, transparent: true, opacity: 0.3, visible: true }),\n    box: new MeshLambertMaterial({ color: 0xff2000, transparent: true, opacity: 0.6, blending: AdditiveBlending, depthWrite: false }),\n  },\n  blue: {\n    mesh: new MeshLambertMaterial({ color: 0x0061ff }),\n    line: new LineBasicMaterial({ color: 0x006bff, blending: AdditiveBlending, transparent: true, opacity: 0.2, visible: true }),\n    box: new MeshLambertMaterial({ color: 0x006bff, transparent: true, opacity: 0.6, blending: AdditiveBlending, depthWrite: false }),\n  }\n}\n\nenum Status {\n  normal = 1,\n  blue = 2,\n  red = 3\n}\n\nexport class Building extends BaseObject {\n  mesh: Mesh\n  line: LineSegments\n  box: Mesh\n  _size: number\n  _status!: Status\n\n  constructor(geometry: BufferGeometry | Geometry, size = 200) {\n    super()\n    // 模型\n    this._size = size\n    const ms = new Mesh(geometry, materials.normal.mesh)\n    const msbox = new Box3().setFromObject(ms)\n    const boxSize = msbox.getSize(new Vector3())\n    if (boxSize.x !== boxSize.y) {\n      const scale = new Matrix4().makeScale(size / boxSize.x, size / boxSize.y, size / boxSize.z)\n      geometry.applyMatrix4(scale)\n      // const translation = new Matrix4().makeTranslation(0, 24, 0)\n      // geometry.applyMatrix4(translation)\n    }\n    this.add(ms)\n\n    // 描边\n    const edges = new EdgesGeometry(ms.geometry)\n    const line = new LineSegments(edges, materials.normal.line)\n    this.add(line)\n\n    // 盒子\n    const boxGeometry = new BoxBufferGeometry(size, size, size)\n    boxGeometry.applyMatrix4(new Matrix4().makeTranslation(0, size / 2, 0))\n    const boxEdges = new EdgesGeometry(boxGeometry)\n    const boxLines = new LineSegments(boxEdges, materials.blue.line)\n    const box = new Mesh(boxGeometry, materials.normal.box)\n    box.add(boxLines)\n    this.add(box)\n\n    box.visible = false\n    this.mesh = ms\n    this.line = line\n    this.box = box\n    \n  }\n\n  // 爆炸特效\n  explode() {\n    const playground = this.playground\n    if (!playground.isPaused) {\n\n      // 获取一次爆炸效果（获取实例）\n      const fire = Fire.getOne()\n      // 定位爆炸发生的位置\n      fire.position.copy(this.position)\n      fire.position.y += this._size / 2\n      // 爆炸的范围\n      const scale = this._size * this.scale.x / Fire.size * 1.8\n      const scaleY = this._size * this.scale.y / Fire.size * 2\n      fire.scale.set(scale, scaleY, scale)\n      playground.add(fire)\n      // 爆炸特效开始\n      fire.start()\n  \n      // 在产生一次爆炸，增强效果\n      setTimeout(() => {\n        const fire1 = Fire.getOne()\n        fire1.position.copy(fire.position)\n        fire1.scale.copy(fire.scale)\n        fire1.rotation.y = -Math.PI / 4\n        playground.add(fire1)\n        fire1.start()\n      }, 800)\n    }\n  }\n\n  set status (status: Status) {\n    this._status = status\n    switch (status) {\n      case Status.blue:\n        this.setMaterial('blue')\n        break\n      case Status.red:\n        this.setMaterial('red')\n        break\n      default:\n        this.setMaterial('normal')\n    }\n  }\n  get status(): Status {\n    return this._status\n  }\n\n  private setMaterial(mtlstr: 'normal'|'red'|'blue') {\n    this.mesh.material = materials[mtlstr].mesh\n    this.line.material = materials[mtlstr].line\n    this.box.material = materials[mtlstr].box\n    const boxBorderMtl = mtlstr === 'normal' ? materials.blue.line : materials[mtlstr].line;\n    (this.box.children[0] as Mesh)['material'] = boxBorderMtl\n  }\n}","export function random(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1) + min)\n}","import { Shape } from 'three'\n\n// 创建一个圆角长方形\nexport function roundedRect( shape: Shape, x:number, y:number, width:number, height:number, radius:number ) {\n  // 起点\n  shape.moveTo( x, y + radius );\n  // 画直线\n  shape.lineTo( x, y + height - radius );\n  // 画圆角\n  // 从.currentPoint创建一条二次曲线，以第一个第二个参数(cpX,cpY)作为控制点，并将.currentPoint更新到第三第四个参数。\n  shape.quadraticCurveTo( x, y + height, x + radius, y + height );\n\n  shape.lineTo( x + width - radius, y + height) ;\n  shape.quadraticCurveTo( x + width, y + height, x + width, y + height - radius );\n\n  shape.lineTo( x + width, y + radius );\n  shape.quadraticCurveTo( x + width, y, x + width - radius, y );\n\n  shape.lineTo( x + radius, y );\n  shape.quadraticCurveTo( x, y, x, y + radius );\n  return shape\n}","import { Panel, PanelOffset } from '../common/Panel'\nimport { h } from '../utils/dom'\nimport { TargetCTF } from './TargetCTF'\n\nexport class TargetCTFPanel extends Panel {\n  titleEl: HTMLDivElement\n  listEl: HTMLDivElement\n  private _type: 1 | 2 | 3 = 1\n  constructor(target: TargetCTF, offset?: PanelOffset) {\n    super(target, offset)\n    // 生成靶标提示标签\n    this.content.innerHTML = ''\n    this.content.classList.add('panel-target')\n    this.titleEl = h('div') as HTMLDivElement\n    this.titleEl.className = 'panel-target-title'\n    this.titleEl.innerHTML = `<span class=\"name\">${target.name}</span><span class=\"score\">${target.score}分</span>`\n\n    this.listEl = h('div') as HTMLDivElement\n    this.listEl.className = 'panel-target-list'\n    this.content.appendChild(this.titleEl);\n    this.content.appendChild(this.listEl);\n    \n    (this.el as HTMLDivElement).addEventListener('mouseenter', () => {\n      target.box.visible = true;\n    });\n    (this.el as HTMLDivElement).addEventListener('mouseleave', () => {\n      target.box.visible = false\n    });\n  }\n  // 靶标被攻击之后的状态提示\n  addItem(name: string) {\n    const count = this.listEl.childElementCount\n    if (count === 3) return\n    const item = h('div')\n    item.className = 'panel-target-item'\n    item.innerHTML = `<span class=\"top\">TOP0${count + 1}</span><span class=\"tname\">${name}</span>`\n    this.listEl.appendChild(item)\n  }\n\n  set type(type: 1 | 2 | 3) {\n    this.content.classList.remove(`panel-target-type-1`)\n    this.content.classList.remove(`panel-target-type-2`)\n    this.content.classList.remove(`panel-target-type-3`)\n    this.content.classList.add(`panel-target-type-${type}`)\n    this._type = type\n  }\n  get type() {\n    return this._type\n  }\n\n  update() {\n    super.update()\n    if (this._type !== 1) {\n      (this.el as HTMLDivElement).style.visibility = 'visible'\n    }\n  }\n}","import { AdditiveBlending, BufferGeometry, Geometry, Line, LineBasicMaterial, Shape } from 'three'\nimport { random } from '../AWD'\nimport { Building } from '../common/Building'\nimport { roundedRect } from '../utils/roundedRect'\nimport { TargetCTFPanel } from './TargetCTFPanel'\nimport { TeamCTF } from './TeamCTF'\n\nconst outlineColors = [ 0xffea00, 0xa8ff00, 0x36ff00, 0x00ffc0, 0x00a2ff]\n\nexport class TargetCTF extends Building{\n  name: string\n  score: number\n  panel: TargetCTFPanel\n  // 获胜队伍\n  winTeams: TeamCTF[] = []\n\n  constructor(geometry: BufferGeometry | Geometry, name: string, score: number) {\n    // 靶标建筑物模型\n    super(geometry)\n    this.name = name\n    this.score = score\n    // 每个靶标都对应生成一个面板标签（HTML标签），用于展示靶标信息，同时保存当前靶标的各种信息\n    this.panel = new TargetCTFPanel(this, { y: 200 })\n\n    // 带圆角的长方形作为基座\n    const shape = roundedRect(new Shape(), 0, 0, 220, 220, 20)\n    // 根据生成的长方形的点绘制长方形基座\n    const geomertyPoints = new BufferGeometry().setFromPoints(shape.getPoints())\n    const outline = new Line(geomertyPoints, new LineBasicMaterial({\n      color: outlineColors[random(0, outlineColors.length - 1)],\n      linewidth: 2,\n      blending: AdditiveBlending\n    }))\n    outline.rotation.x = -Math.PI / 2\n    outline.position.set(-110, -10, 110)\n    this.add(outline)\n  }\n\n  // 当前靶标被攻击\n  beAttack(team: TeamCTF, success: boolean) {\n    // 记录数据\n    if (success) {\n      // 攻击成功的需要进行标签提示\n      this.panel.addItem(team.name)\n      if (!this.winTeams.includes(team)) this.winTeams.push(team)\n    }\n\n    setTimeout(() => {\n      // 执行爆炸、变色、显示面板\n      this.explode()\n      // 攻击成功与否的状态（2蓝色，表示成功；3红色，表示失败；1是常规）\n      this.status = success ? 2 : 3\n      this.panel.type = this.status\n\n      setTimeout(() => {\n        // 结束\n        this.panel.type = 1\n        this.status = success || this.winTeams.length ? 2 : 1\n      }, 4000)\n    }, 500)\n  }\n\n  destroy() {\n    this.panel.destroy()\n  }\n}","import { h } from './dom'\n\n// 展示结束攻击之后的信息\nexport function broadcast(title: string, content: string, duraing = 2000) {\n  const el = h('div')\n  el.className = 'broadcast in'\n  el.innerHTML = `\n    <div class=\"broadcast-title\">${title}</div>\n    <div class=\"broadcast-content\">${content}</div>`\n  document.body.appendChild(el)\n  getComputedStyle(el).height\n  el.className = 'broadcast'\n  setTimeout(() => {\n    el.className = 'broadcast out'\n    setTimeout(() => {\n      document.body.removeChild(el)\n    }, 2000)\n  }, duraing)\n}\n","import { Panel, PanelOffset } from '../common/Panel'\nimport { BaseObject } from '../common/BaseObject'\n\nexport class TeamCTFPanel extends Panel {\n  constructor(obj: BaseObject, offset?: PanelOffset) {\n    super(obj, offset)\n    this.content.classList.add('panel-team')\n  }\n}","export function loop(option: { interval: number, times: number, callback: ()=>void, onStart?: ()=>void, onEnd?: ()=>void }) {\n  let _times = option.times || 1 ;// 循环次数\n  let timer:number | undefined\n  function fn() {\n    option.callback()\n    timer = setTimeout(() => {\n      _times -= 1\n      if (_times <= 0) {\n        // 循环结束\n        clearTimeout(timer)\n        option.onEnd && option.onEnd()\n      } else {\n        // 一直执行\n        option.callback()\n        fn()\n      }\n    }, option.interval)\n  }\n  option.onStart && option.onStart()\n  fn()\n}","import { Easing, Tween } from '@tweenjs/tween.js'\nimport { AdditiveBlending, BoxGeometry, DoubleSide, LineSegments, Mesh, MeshBasicMaterial, MeshStandardMaterial, Object3D, TextureLoader } from 'three'\nimport { broadcast } from '../utils/broadcast'\nimport { Bullet } from '../common/Bullet'\nimport { PlaygroundCTF } from './PlaygroundCTF'\nimport { BaseObject } from '../common/BaseObject'\nimport { TeamCTFPanel } from './TeamCTFPanel'\nimport { loop } from '../utils/loop'\nimport { TargetCTF } from './TargetCTF'\nimport { imgsDir } from '../consts'\nimport { random } from '../AWD'\n\n// const tailMaterial = new MeshBasicMaterial({\n//   transparent: true,\n//   blending: AdditiveBlending,\n//   side: DoubleSide,\n//   depthWrite: false,\n//   map: new TextureLoader().load(`${imgsDir}/team-tail.png`)\n// })\n\nlet meshMaterial: MeshStandardMaterial\n\n\nexport class TeamCTF extends BaseObject {\n  name: string //队伍名称\n  target!: TargetCTF | null  // 当前攻击目标\n  success = false\n\n  panel: TeamCTFPanel\n  box!: LineSegments\n  mesh: Mesh\n  // 一个虚拟的点，用于标识特写摄像机位置\n  cpos = new Object3D()\n  // 获胜记录\n  winRecords: string[] = []\n  // 初始旋转角度\n  initialRotationY = 0\n\n  constructor(mesh: Mesh, name: string) {\n    super()\n    this.name = name\n    // 每个队伍都对应生成一个面板标签（HTML标签），用于展示队伍信息，同时保存当前队伍的各种信息\n    this.panel = new TeamCTFPanel(this, { y: 55, x: -40 })\n\n    // 设置队伍（飞机模型）的材质\n    const mtl = mesh.material as MeshStandardMaterial\n    const normalMap = mtl.normalMap\n    meshMaterial = meshMaterial || new MeshStandardMaterial({\n      color: 0x455a69,\n      roughness: 0.5,\n      normalMap\n    })\n    const ms = mesh.clone()\n    ms.material = meshMaterial\n    this.mesh = ms\n    // 设置队伍的位置属性\n    ms.scale.set(0.3, 0.3, 0.3)\n    ms.rotation.y = -Math.PI\n    ms.position.y = -5\n\n    // 设置立方缓冲几何体（模拟尾部动力装置，带颜色的部分）\n    const g = new BoxGeometry(6, 24, 6)\n    g.faces.splice(4, 2)\n    g.faces.splice(4, 2)\n    // 尾部的材质\n    const m = new MeshBasicMaterial({\n      transparent: true,\n      blending: AdditiveBlending,\n      side: DoubleSide,\n      depthWrite: false,\n      // 贴图\n      map: new TextureLoader().load(`${imgsDir}/team-tail-${random(0, 7)}.png`)\n    })\n    const tail = new Mesh(g, m)\n    tail.rotation.x = -Math.PI / 2\n    tail.position.set(-20, -5, -55)\n    // 第二个尾部动力装置\n    const tail2 = tail.clone()\n    tail2.position.x = 20\n\n    this.position.y = 400\n    // 设置一个位置，用于表示跟随当前队伍的特写相机的位置\n    this.cpos.position.set(0, 20, -100)\n\n    this.add(ms, tail, tail2, this.cpos)\n  }\n\n  // 进行攻击\n  private startAttack() {\n    const playground = this.playground as PlaygroundCTF\n    // 攻击时对发起攻击的队伍进行特写\n    playground.focus(this)\n    // 旋转队伍使其在世界空间中面朝靶标。\n    this.lookAt((this.target as TargetCTF).position)\n    const toRotate = { x: this.rotation.x, y: this.rotation.y, z: this.rotation.z }\n    this.rotation.set(0, 0, 0)\n    // 位置角度发生变化时进行动画\n    new Tween(this.position)\n      .to({ y: 200 }, 400)\n      .easing(Easing.Quartic.InOut)\n      .onComplete(this.attack.bind(this)) //正式发起攻击\n      .start()\n      // 旋转动画\n    new Tween(this.rotation)\n      .to(toRotate, 300)\n      .start()\n  }\n  // 正式进行攻击\n  private attack() {\n    const { target, success } = this\n    const playground = this.playground\n    // 连续攻击（静态情况下，按次数递归执行）\n    loop({\n      interval: 150,\n      times: 10, //射击次数\n      onStart: () => {\n        // 开始攻击，延时是为了等到子弹射击几次之后才开始显示靶标特效\n        setTimeout(() => { (target as TargetCTF).beAttack(this, success) }, 900)\n      },\n      callback: () => {\n        // 队伍射击时，面朝靶标\n        this.lookAt((target as TargetCTF).position)\n        // 执行射击（每次射击都会生成子弹发射）\n        Bullet.shoot(playground, this, (target as TargetCTF))\n      },\n      onEnd: () => {\n        // 结束射击\n        setTimeout(this.endAttack.bind(this), 1100)\n      }\n    })\n  }\n\n  // 结束攻击\n  private endAttack() {\n    // 当前队伍连续攻破多少个靶标\n    if (this.winRecords.length >= 3) broadcast(\n      'KILL SPREE!!',\n      `队伍 <span style=\"color:#fff\">${this.name}</span> 连续攻破<span style=\"color:#fff\">${this.winRecords.length}</span>题!`\n    )\n    this.target = null\n    this.success = false\n\n    // 队伍回归原位置的动画\n    new Tween(this.rotation)\n      .to({ x: 0, y: this.initialRotationY, z: 0 }, 400)\n      .start()\n    new Tween(this.position)\n      .to({ y: 300 })\n      .easing(Easing.Quadratic.InOut)\n      .start()\n  }\n\n  // 开始攻击\n  toAttack(target: TargetCTF, success = false) {\n    // 是否成功攻击目标，成功的添加进winRecords数组\n    if (success) this.winRecords.push(target.name)\n    else this.winRecords = []\n\n    if (this.target) return\n    // 保存当前攻击的目标\n    this.target = target\n    // 保存攻击的结果\n    this.success = success\n    // this.playground是继承自BaseObject的属性，获取顶层Scene对象\n    // 因为playgroundCTF类是继承自Scene基类，并且teamCTF和targetCTF都是添加到playgroundCTF类中的，所以这里的this.playground指向playgroundCTF类的实例\n    if (this.playground.isPaused) {\n      // ctf场景是否处于暂定状态\n      this.target.beAttack(this, success)\n      this.target = null\n      this.success = false\n    } else {\n      // 开始攻击\n      this.startAttack()\n    }\n  }\n\n  destroy() {\n    this.panel.destroy()\n  }\n}","\nimport { Component, Vue } from 'vue-property-decorator';\nimport axios from \"axios\";\nimport { PlaygroundCTF, CTFAssetsLoader, TargetCTF, TeamCTF, random } from './index'\n\n@Component\nexport default class CTF extends Vue {\n    mounted() {\n        this.init();\n    }\n    async init() {\n      // 1.加载场景所需资源\n      const assets = await CTFAssetsLoader.load()\n      // 加载 队伍 和 靶标 数据\n      const [targetData, teamData] = await Promise.all([\n        axios.get('/threejs-ctf/json/targets.json'),\n        axios.get('/threejs-ctf/json/teams.json')\n      ])\n      // 2.初始化场景\n      const playgroundCTF = new PlaygroundCTF((document.querySelector('#ctf') as HTMLElement), assets)\n      // 初始化靶标\n      const targets = targetData.data.map((item:any) => {\n        // 靶标 3D 模型，从资源文件的建筑物中随机取一个\n        const buildingModel = assets.buildings[random(0, assets.buildings.length - 1)]\n        // 靶标模型实例\n        return new TargetCTF(buildingModel, item.name, item.score)\n      })\n      // 初始化队伍\n      const teams = teamData.data.map((item:any) => {\n        // 队伍 3D 模型\n        const teamModel = assets.aerobat\n        return new TeamCTF(teamModel as any, item.name)\n      })\n      // 向场景添加队伍和靶标\n      playgroundCTF.setTeams(teams)\n      playgroundCTF.setTargets(targets)\n\n      // 随机攻击\n      function randomAttack() {\n        if (!teams.length || !targets.length) return\n        // 随机选一个队伍\n        const team = teams[random(0, teams.length - 1)]\n        // 随机选一个靶标\n        const target = targets[random(0, targets.length - 1)]\n        // 随机表示是否攻击成功\n        const isSuccess = Math.random() > 0.5\n        // 开始攻击\n        team.toAttack(target, isSuccess)\n        // 一直进行模拟攻击\n        setTimeout(randomAttack, Math.random() * 10000)\n      }\n      \n      setTimeout(randomAttack, 5000)\n    }\n}\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=34c534c2&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport VueRouter, { RouteConfig } from 'vue-router'\nimport Ctf from '../views/Ctf/index.vue'\n\nVue.use(VueRouter)\n\nconst routes: Array<RouteConfig> = [\n  {\n    path: '/',\n    name: 'ctf',\n    component: Ctf\n  },\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\nexport default router\n","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n  },\n  getters: {\n  },\n  mutations: {\n  },\n  actions: {\n  },\n  modules: {\n  }\n})\n","import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport store from './store'\n\nVue.config.productionTip = false\n\nnew Vue({\n  router,\n  store,\n  render: h => h(App)\n}).$mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkctf_awd\"] = self[\"webpackChunkctf_awd\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(2421); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_c","_self","attrs","staticRenderFns","script","component","_setupProxy","staticClass","h","tagName","document","createElement","loadUI","loadText","appendChild","className","id","AssetsLoadingManager","LoadingManager","onStart","body","innerHTML","onProgress","url","loaded","total","toFixed","onLoad","console","log","style","opacity","setTimeout","removeChild","onError","assetsDir","modelsDir","imgsDir","CTFAssetsLoader","Promise","resolve","assets","buildings","count","callback","ImageLoader","load","img","heightimg","arr","CubeTextureLoader","map","n","cubeTexture","OBJLoader","obj","mesh","children","push","geometry","applyMatrix4","Matrix4","makeTranslation","GLTFLoader","gltf","scene","aerobat","Panel","constructor","offset","distance","el","content","name","panelsContainer","querySelector","instances","x","y","z","forEach","p","update","position","clone","getWorldPosition","camera","distanceTo","scale","v","project","window","innerWidth","innerHeight","setAttribute","destroy","Playground","Scene","super","AmbientLight","PerspectiveCamera","WebGLRenderer","antialias","RenderPass","EffectComposer","renderer","Stats","classList","add","controls","OrbitControls","init","composer","stats","domElement","shadowMap","enabled","lookAt","updateProjectionMatrix","updateMatrixWorld","fog","FogExp2","ambientLight","passes","scenePass","minDistance","maxDistance","autoRotate","autoRotateSpeed","enableDamping","dampingFactor","maxPolarAngle","Math","PI","top","addEventListener","resize","bind","animate","isPaused","requestAnimationFrame","TweenUpdate","clientWidth","clientHeight","aspect","setSize","setPixelRatio","devicePixelRatio","Vector2","Terrain","PlaneBufferGeometry","heightImg","width","height","rotation","makeRotationX","canvas","ctx","getContext","drawImage","pixels","getImageData","data","array","attributes","len","i","MapGrid","Array","size","radius","grd","createRadialGradient","addColorStop","fillStyle","fillRect","length","max","num","value","round","item","used","center","sort","a","b","PlaygroundCTF","Group","focusCamera","Error","dirLight","DirectionalLight","set","plight1","PointLight","plight2","background","material","LineBasicMaterial","color","blending","AdditiveBlending","terrainGeometry","edges","EdgesGeometry","terrain","LineSegments","g","m","MeshBasicMaterial","transparent","TextureLoader","depthWrite","scan","Mesh","pg1","m1","mesh1","pg","BoxBufferGeometry","pm","MeshLambertMaterial","side","DoubleSide","teamGroup","setTeams","teams","clearTeams","team","addTeam","index","grid","mapGrid","rotationY","atan2","initialRotationY","gridSize","t","remove","setTargets","targets","clearTargets","score","addTarget","target","Tween","delay","to","easing","Easing","start","focus","isFocus","focusTeam","focusScenePass","unFocus","updateFocusCamera","Vector3","cpos","BaseObject","Object3D","playground","parent","type","Bullet","pool","from","isCurve","bullet","find","sp","ep","matrixWorld","curve","QuadraticBezierCurve3","onUpdate","getPoint","getTangent","onComplete","MeshStandardMaterial","roughness","Fire","texture","needsUpdate","repeat","mesh2","tween","fire","f","materials","normal","line","visible","box","red","blue","Status","Building","_size","ms","msbox","Box3","setFromObject","boxSize","getSize","makeScale","boxGeometry","boxEdges","boxLines","explode","getOne","copy","scaleY","fire1","status","_status","setMaterial","mtlstr","boxBorderMtl","random","min","floor","roundedRect","shape","moveTo","lineTo","quadraticCurveTo","TargetCTFPanel","titleEl","listEl","addItem","childElementCount","_type","visibility","outlineColors","TargetCTF","panel","Shape","geomertyPoints","BufferGeometry","setFromPoints","getPoints","outline","Line","linewidth","beAttack","success","winTeams","includes","broadcast","title","duraing","getComputedStyle","TeamCTFPanel","loop","option","timer","_times","times","fn","clearTimeout","onEnd","interval","meshMaterial","TeamCTF","mtl","normalMap","BoxGeometry","faces","splice","tail","tail2","startAttack","toRotate","attack","endAttack","winRecords","toAttack","CTF","Vue","mounted","targetData","teamData","all","axios","playgroundCTF","buildingModel","teamModel","randomAttack","isSuccess","Component","VueRouter","routes","path","Ctf","router","mode","base","process","Vuex","state","getters","mutations","actions","modules","store","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","deferred","O","result","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","key","r","getter","__esModule","d","definition","o","defineProperty","enumerable","get","globalThis","Function","e","prop","prototype","hasOwnProperty","call","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}